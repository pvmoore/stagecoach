{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "candle",
	"patterns": [
		{
			"include": "#keywords"
		},
		{
			"include": "#strings"
		},
		{
			"include": "#chars"
		},
		{
			"include": "#function-calls"
		},
		{
			"include": "#line-comment"
		},
		{
			"include": "#block-comment"
		},
		{
			"include": "#number-literals"
		},
		{
			"include": "#user-defined-type"
		},
		{
			"include": "#terminator"
		},
		{
			"include": "#curly-brackets"
		},
		{
			"include": "#pipes"
		},
		{
			"include": "#attributes"
		},
		{
			"include": "#lhs"
		}
	],
	"repository": {
		"block-comment": {
			"patterns": [
				{
					"begin": "/\\*",
					"end": "\\*/",
					"name": "comment.block.stage1"
				}
			]
		},
		"chars": {
			"begin": "'",
			"end": "'",
			"name": "constant.numeric.char.stage1",
			"patterns": [
				{
					"match": "\\\\.",
					"name": "constant.numeric.char.escape.stage1"
				}
			]
		},
		"curly-brackets": {
			"patterns": [
				{
					"match": "(\\{|\\})",
					"name": "punctuation.curly-brackets"
				}
			]
		},
		"function-calls": {
			"patterns": [
				{
					"captures": {
						"1": {
							"name": "entity.name.function"
						}
					},
					"match": "\\b([_a-z][_a-zA-Z0-9]*)\\("
				},
				{
					"captures": {
						"1": {
							"name": "entity.name.function"
						}
					},
					"match": "\\b(operator(\\[\\]|==|!=))\\("
				}
			]
		},
		"keywords": {
			"patterns": [
				{
					"match": "\\b(const|if|while|return|import|not|is|as|and|or|else|break|continue|select|ushr|udiv|umod|ult|ugt|ulte|ugte)\\b",
					"name": "keyword.control.stage1"
				},
				{
					"match": "\\b(alias|strong|bool|byte|ubyte|short|ushort|int|uint|long|ulong|float|double|void|struct|fn|extern|enum|union)(\\*+|\\b)",
					"name": "storage.type.stage1"
				},
				{
					"match": "\\b(public)(\\*+|\\b)",
					"name": "storage.modifier.public.stage1"
				},
				{
					"match": "\\b(private)(\\*+|\\b)",
					"name": "storage.modifier.private.stage1"
				},
				{
					"match": "@[_\\w]+\\b",
					"name": "entity.name.function.stage1"
				},
				{
					"match": "\\[\\[.*\\]\\]",
					"name": "entity.name.tag.stage1"
				},
				{
					"match": "\\b\\[.*\\]\\b",
					"name": "entity.name.tag.stage1"
				},
				{
					"match": "\\b(true|false|null)\\b",
					"name": "constant.numeric"
				},
				{
					"match": "\\b(thisnope)(\\**|\\b)",
					"name": "entity.other.this.stage1"
				},
				{
					"match": "\\b(assert)\\b",
					"name": "entity.name.function.assert.stage1"
				}
			]
		},
		"line-comment": {
			"patterns": [
				{
					"match": "//.*$",
					"name": "comment.line.stage1"
				}
			]
		},
		"named_arguments": {
			"patterns": [
				{
					"captures": {
						"1": {
							"name": "entity.name.tag.stage1"
						}
					},
					"match": "[^\\.]([a-zA-Z_][a-zA-Z0-9_]*\\s*):(?!=)"
				}
			]
		},
		"number-literals": {
			"patterns": [
				{
					"match": "([\\d_]+\\.[\\d_]+(f|d|h)?)",
					"name": "constant.numeric.float"
				},
				{
					"match": "\\b[\\d_]+\\b",
					"name": "constant.numeric"
				},
				{
					"match": "\\b0b[0-1_]+\\b",
					"name": "constant.numeric.binary"
				},
				{
					"match": "\\b0x[\\d_a-fA-F]+\\b",
					"name": "constant.numeric.hex"
				}
			]
		},
		"pipes": {
			"patterns": [
				{
					"match": "\\|",
					"name": "punctuation.pipe.stage1"
				}
			]
		},
		"strings": {
			"begin": "\"",
			"end": "\"z?",
			"name": "string.quoted.double.stage1",
			"patterns": [
				{
					"match": "\\\\.",
					"name": "constant.character.escape.stage1"
				}
			]
		},
		"terminator": {
			"patterns": [
				{
					"match": ";",
					"name": "punctuation.terminator"
				}
			]
		},
		"user-defined-type": {
			"patterns": [
				{
					"captures": {
						"1": {
							"name": "storage.type.user-defined.stage1"
						}
					},
					"match": "\\b([A-Z][_a-zA-Z0-9]+(\\*+|\\b|\\())"
				}
			]
		},
		"attributes": {
			"patterns": [
				{
					"captures": {
						"1": {
							"name": "entity.name.tag.attribute.stage1"
						},
						"2": {
							"name": "entity.name.tag.attribute.stage1"
						},
						"3": {
							"name": "entity.name.tag.attribute.stage1"
						}
					},
					"match": "(#)(\\w+)?\\((.+)\\)"
				}
			]
		},
		"lhs": {
			"patterns": [
				{
					"captures": {
						"1": {
							"name": "storage.type.lhs.stage1"
						}
					},
					"match": "\\b([_a-zA-Z][_a-zA-Z0-9]+)\\."
				}
			]
		}

	},
	"scopeName": "source.stage1"
}
